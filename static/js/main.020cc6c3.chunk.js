(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{120:function(e,t){},123:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),s=n.n(r),a=n(52),i=n.n(a),o=(n(58),n(8)),u=n(3),b=n.n(u),l=n(7),O=n(13),d=n(14),j=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(e.streamId),s=Object(o.a)(n,2),a=s[0],i=s[1];Object(r.useEffect)((function(){i(e.streamId)}),[e]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{onClick:function(){Object(l.a)(b.a.mark((function e(){var n,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a,e.next=3,_.create(d.API_OPERATION.SUBSCRIBE,n,{});case 3:return(c=e.sent).on("bitRate",(function(e){var t=e.bitRate,n=e.kind;console.log("current subscribe bitrate for ".concat(n," track is ").concat(t))})).on("connectionstatechange",(function(e){var t=e.state;console.log("current transport connection state is ".concat(t))})),e.next=7,c.subscribe();case 7:r=e.sent,t.current&&r&&(t.current.srcObject=r);case 9:case"end":return e.stop()}}),e)})))()},children:"Subscribe"}),Object(c.jsx)("video",{ref:t,muted:!0,autoPlay:!0,playsInline:!0})]})},f=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(c.jsx)(c.Fragment,{children:0!==n.length?Object(c.jsxs)("span",{children:["Published ",Object(c.jsx)(j,{streamId:n})]}):Object(c.jsxs)("span",{children:[Object(c.jsx)("button",{onClick:function(){Object(l.a)(b.a.mark((function e(){var t,n,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.random().toString(36).substr(2),n=["audio","video"],!1,c=!0,e.next=6,O.Utils.getUserMedia({video:n.includes("video"),audio:n.includes("audio")},false);case 6:return r=e.sent,e.next=9,_.create(d.API_OPERATION.PUBLISH,t,{simulcast:c});case 9:e.sent.on("bitRate",(function(e){var t=e.bitRate,n=e.kind;console.log("current publish bitrate for ".concat(n," track is ").concat(t))})).on("connectionstatechange",(function(e){var t=e.state;console.log("current transport connection state is ".concat(t))})).publish(r),s(t);case 12:case"end":return e.stop()}}),e)})))()},children:"Publish"}),Object(c.jsx)("strong",{children:" Please Publish stream "})]})})},T=function(e){var t=e.stream,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){n.current&&t&&(n.current.srcObject=t)}),[t]),Object(c.jsx)("video",{ref:n,muted:!0,autoPlay:!0,playsInline:!0})},_=(Object({NODE_ENV:"production",PUBLIC_URL:"/avCoreTrain",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DB_CLIENT:"https://lobby.stagescloud.com:8080",REACT_APP_DB_TOKEN:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVmZTRiNzMzZmMzOTliYTgzMmZhOGFmYiIsImlhdCI6MTYwODgyNDc0Mn0.aW_zq_P9OsZLU_us3HsQUnF3Hm-69prrCqmxqFTp5YdKfqqL-XRZ-gNQKkwBStUzBBCvT0fxaN9ChDdN8CKjqA"}).REACT_APP_DB_TOKEN_EXAMPLE,Object({NODE_ENV:"production",PUBLIC_URL:"/avCoreTrain",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DB_CLIENT:"https://lobby.stagescloud.com:8080",REACT_APP_DB_TOKEN:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVmZTRiNzMzZmMzOTliYTgzMmZhOGFmYiIsImlhdCI6MTYwODgyNDc0Mn0.aW_zq_P9OsZLU_us3HsQUnF3Hm-69prrCqmxqFTp5YdKfqqL-XRZ-gNQKkwBStUzBBCvT0fxaN9ChDdN8CKjqA"}).REACT_APP_DB_CLIENT_EXAMPLE,n(123),new O.CloudClient("https://lobby.stagescloud.com:8080","eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRJZCI6IjVmZTRiNzMzZmMzOTliYTgzMmZhOGFmYiIsImlhdCI6MTYwODgyNDc0Mn0.aW_zq_P9OsZLU_us3HsQUnF3Hm-69prrCqmxqFTp5YdKfqqL-XRZ-gNQKkwBStUzBBCvT0fxaN9ChDdN8CKjqA")),C=function(){var e=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var I=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(r.useEffect)((function(){C().then((function(e){return s(e)}))}),[]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)("p",{children:"Training"})}),Object(c.jsx)(T,{stream:n}),Object(c.jsx)(f,{})]})};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(I,{})}),document.getElementById("root")),n(124).config()},58:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.020cc6c3.chunk.js.map